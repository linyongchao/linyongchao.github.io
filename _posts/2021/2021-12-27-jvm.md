---
layout: post
title:  JVM 相关
date:   2021-12-27 22:19:54
categories: Java
---

* content
{:toc}

### JMX

在 Java 启动脚本中增加如下三个参数，即可开启 JMX 远程连接

	-Dcom.sun.management.jmxremote.port=2235 
	-Dcom.sun.management.jmxremote.ssl=false 
	-Dcom.sun.management.jmxremote.authenticate=false
	
然后启动 ```./jvisualvm```，在远程主机上右键，添加 JMX 连接，即可远程监控程序运行状态

### jstat

详情参考[这里](http://blog.itpub.net/31543790/viewspace-2657093/)

jstat 命令格式如下：

	jstat [命令选项] [pid] [间隔时间（毫秒）] [查询次数]
	
命令选项可以通过 ```./jstat -options``` 查看，结果如下：

	-class
	-compiler
	-gc
	-gccapacity
	-gccause
	-gcmetacapacity
	-gcnew
	-gcnewcapacity
	-gcold
	-gcoldcapacity
	-gcutil
	-printcompilation
	
命令举例：

	./jstat -gcutil 29262
	./jstat -gcutil -t 29262 1000 100
	./jstat -gc -t 29262 1000
	
### jmap

导出内存堆栈：

	./jmap -dump:format=b,file=29262.hprof 29262

查看占用空间最大的 30 个对象	

	./jmap -histo:live 29262 | head -30
	
### jstack

	./jstack 29262
	./jstack 29262 > 29262.log