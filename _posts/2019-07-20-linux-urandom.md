---
layout: post
title:  解决初始化 Oracle 数据库连接池耗时很长的问题
date:   2019-07-20 22:06:54
categories: Linux
---

* content
{:toc}

参考[这里](https://www.cnblogs.com/coacaio/p/4375244.html)、[这里](https://www.cnblogs.com/softidea/p/5873293.html)和[这里](https://baike.baidu.com/item/%E5%86%85%E6%A0%B8%E7%86%B5%E6%B1%A0/1731396?fr=aladdin)

在启动命令中增加 ```-Djava.security.egd=file:///dev/urandom```，解决问题

原因：  
默认使用的 ```/dev/random``` 是阻塞的随机数生成器，当熵池中的环境噪声不足时，```/dev/random``` 会阻塞，直到熵池收集到足够的环境噪声为止  
修改后使用的 ```/dev/urandom``` 是非阻塞的随机数生成器，它会重复使用熵池中的数据以产生伪随机数

关于熵池和噪声：

Linux内核采用熵来描述数据的随机性。熵（entropy）是描述系统混乱无序程度的物理量，一个系统的熵越大则说明该系统的有序性越差，即不确定性越大。在信息学中，熵被用来表征一个符号或系统的不确定性，熵越大，表明系统所含有用信息量越少，不确定度越大。

计算机本身是可预测的系统，因此，用计算机算法不可能产生真正的随机数。但是机器的环境中充满了各种各样的噪声，如硬件设备发生中断的时间，用户点击鼠标的时间间隔等是完全随机的，事先无法预测。Linux内核实现的随机数产生器正是利用系统中的这些随机噪声来产生高质量随机数序列。

内核维护了一个熵池用来收集来自设备驱动程序和其它来源的环境噪音。理论上，熵池中的数据是完全随机的，可以实现产生真随机数序列。为跟踪熵池中数据的随机性，内核在将数据加入池的时候将估算数据的随机性，这个过程称作熵估算。熵估算值描述池中包含的随机数位数，其值越大表示池中数据的随机性越好。