---
layout: post
title:  Consumer
date:   2018-01-15 17:33:05
categories: JDK
---

* content
{:toc}

JDK1.8å¢åŠ äº†ä¸€ä¸ªConsumeræ¥å£ï¼Œç°åœ¨å°±æ¥æ¢ç©¶ä¸€ä¸‹ã€‚
	
### æºç 

	/**
	 * Represents an operation that accepts a single input argument and returns no
	 * result. Unlike most other functional interfaces, {@code Consumer} is expected
	 * to operate via side-effects.
	 *
	 * <p>This is a <a href="package-summary.html">functional interface</a>
	 * whose functional method is {@link #accept(Object)}.
	 *
	 * @param <T> the type of the input to the operation
	 *
	 * @since 1.8
	 */
	@FunctionalInterface
	public interface Consumer<T> {
	
	    /**
	     * Performs this operation on the given argument.
	     *
	     * @param t the input argument
	     */
	    void accept(T t);
	
	    /**
	     * Returns a composed {@code Consumer} that performs, in sequence, this
	     * operation followed by the {@code after} operation. If performing either
	     * operation throws an exception, it is relayed to the caller of the
	     * composed operation.  If performing this operation throws an exception,
	     * the {@code after} operation will not be performed.
	     *
	     * @param after the operation to perform after this operation
	     * @return a composed {@code Consumer} that performs in sequence this
	     * operation followed by the {@code after} operation
	     * @throws NullPointerException if {@code after} is null
	     */
	    default Consumer<T> andThen(Consumer<? super T> after) {
	        Objects.requireNonNull(after);
	        return (T t) -> { accept(t); after.accept(t); };
	    }
	}
	
### ç¿»è¯‘
	
	/**
	 * è¡¨ç¤ºæ¥å—å•ä¸ªè¾“å…¥å‚æ•°å¹¶ä¸è¿”å›ç»“æœçš„æ“ä½œã€‚
	 * å’Œå¤§å¤šæ•°å‡½æ•°å¼æ¥å£ä¸åŒï¼ŒConsumeræ¥å£é¢„è®¡å°†é€šè¿‡å‰¯ä½œç”¨è¿›è¡Œæ“ä½œã€‚
	 *
	 * è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œå…¶å‡½æ•°å¼æ–¹æ³•æ˜¯acceptã€‚
	 *
	 * @param <T> æ“ä½œçš„è¾“å…¥ç±»å‹
	 *
	 * @since 1.8
	 */
	@FunctionalInterface
	public interface Consumer<T> {
	
	    /**
	     * åœ¨ç»™å®šçš„å‚æ•°ä¸Šæ‰§è¡Œæ­¤æ“ä½œ.
	     *
	     * @param t è¾“å…¥çš„å‚æ•°
	     */
	    void accept(T t);
	
	    /**
	     * è¿”å›ä¸€ä¸ªæœ‰åºçš„Consumeræ“ä½œç»„åˆ, æœ¬æ“ä½œæ‰§è¡Œä¹‹åæ‰§è¡Œafteræ“ä½œã€‚
	     * å¦‚æœä»»æ„æ“ä½œæ‰§è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™å°†å¼‚å¸¸åé¦ˆåˆ°æ“ä½œç»„åˆçš„è°ƒç”¨æ–¹ã€‚
	     * å¦‚æœæœ¬æ“ä½œæ‰§è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œafteræ“ä½œã€‚
	     *
	     * @param after æœ¬æ“ä½œä¹‹åæ‰§è¡Œçš„æ“ä½œ
	     * @return ä¸€ä¸ªæœ‰åºçš„æ“ä½œç»„åˆï¼Œæœ¬æ“ä½œæ‰§è¡Œä¹‹åæ‰§è¡Œafteræ“ä½œ
	     * @throws NullPointerException å¦‚æœafteræ“ä½œä¸ºnullåˆ™æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸
	     */
	    default Consumer<T> andThen(Consumer<? super T> after) {
	        Objects.requireNonNull(after);
	        return (T t) -> { accept(t); after.accept(t); };
	    }
	}
	
### æ‘˜è¦

1. Consumeræ¥å£æ˜¯å‡½æ•°å¼æ¥å£ï¼Œå…¶acceptæ–¹æ³•æ²¡æœ‰è¿”å›å€¼
2. Consumeræ¥å£é€šè¿‡å‰¯ä½œç”¨è¿›è¡Œæ“ä½œï¼Œæˆ‘ç†è§£çš„å°±æ˜¯åœ¨åŸæ¥å¯¹è±¡ä¸Šè¿›è¡Œæ›´æ”¹ï¼ˆä¸çŸ¥é“å¯¹ä¸å¯¹ï¼ŒğŸ˜“ï¼Œæ²¡æœ‰æ‰¾åˆ°é è°±çš„èµ„æ–™ï¼‰

### å®ä¾‹

å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼š

	public class Student {
		private int id;
		private String name;
		private int age;
		
		public Student(int id, String name, int age) {
			this.id = id;
			this.name = name;
			this.age = age;
		}
		
		@Override
		public String toString() {
			return "Student [id=" + id + ", name=" + name + ", age=" + age + "]";
		}
		
		public void setId(int id) {
			this.id = id;
		}
		
		public void setName(String name) {
			this.name = name;
		}
		
		public void setAge(int age) {
			this.age = age;
	}
}
	
å®ä¾‹1ï¼š
	
	Student student = new Student(1, "lin", 20);
	System.out.println(student.toString());
	
	Consumer<Student> c1 = s -> s.setName("chen");
	c1.accept(student);
	System.out.println(student.toString());
		
	è¾“å‡ºç»“æœä¸ºï¼š
	Student [id=1, name=lin, age=20]
	Student [id=1, name=chen, age=20]
	
å®ä¾‹2ï¼š
	
	Student student = new Student(1, "lin", 20);
	System.out.println(student.toString());
	
	Consumer<Student> c1 = s -> s.setId(2);
	Consumer<Student> c2 = s -> s.setName("chen");
	Consumer<Student> c3 = s -> s.setAge(18);
	c3.andThen(c2).andThen(c1).accept(student);
	System.out.println(student.toString());
	
	è¾“å‡ºç»“æœä¸ºï¼š
	Student [id=1, name=lin, age=20]
	Student [id=2, name=chen, age=18]
	